@model IEnumerable<WebArsip.Mvc.Models.ViewModels.PermissionViewModel>

@{
    ViewData["Title"] = "Permission Management";
    Layout = "_LayoutPrivate";
}

<link rel="stylesheet" href="~/css/document/index.css" />
<link rel="stylesheet" href="~/css/permission/index.css" />
<link rel="stylesheet" href="~/css/_responsive.css" />
<link rel="stylesheet" href="~/css/theme/datatables-theme.css" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">


    <div class="container mt-5 mb-5 document-container fade-in">
        <div class="card glass-card shadow-lg border-0 p-4">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h3 class="fw-semibold text-gradient">
                <i class="bi bi-lock-fill"></i> Role Permission Management
                </h3>
                <a asp-action="Create" class="btn btn-primary btn-glass px-4 rounded-pill">
                    <i class="bi bi-plus-circle"></i> Add Permission
                </a>
            </div>


    <div class="table-responsive shadow-lg rounded-3">
        <table class="table table-hover table-dark align-middle mb-0" id="permissionTable">
            <thead class="bg-gradient-primary text-center text-uppercase">
                <tr>
                    <th>Role</th>
                    <th>Can View</th>
                    <th>Can Edit</th>
                    <th>Can Delete</th>
                    <th>Can Upload</th>
                    <th>Can Download</th>
                    <th class="text-center">Action</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td class="fw-semibold text-light">@item.RoleName</td>
                        <td>@(item.CanView ? "✅" : "❌")</td>
                        <td>@(item.CanEdit ? "✅" : "❌")</td>
                        <td>@(item.CanDelete ? "✅" : "❌")</td>
                        <td>@(item.CanUpload ? "✅" : "❌")</td>
                        <td>@(item.CanDownload ? "✅" : "❌")</td>
                        <td class="text-center">
                            <a asp-action="Edit" asp-route-id="@item.PermissionId"
                               class="btn btn-warning btn-sm rounded-pill me-1">
                                <i class="bi bi-pencil-square"></i>
                            </a>
                            <button type="button" class="btn btn-danger btn-sm rounded-pill"
                                    onclick="deletePermission(@item.PermissionId)">
                                <i class="bi bi-trash"></i>
                            </button>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="~/js/permission/index.js"></script>
    <script src="~/js/theme/datatables-theme.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const success = '@TempData["Success"]';
            const error = '@TempData["Error"]';

            if (success && success !== "") {
                Swal.fire({
                    iconHtml: '<div class="swal2-success-circular"><div class="checkmark"></div></div>',
                    customClass: { icon: 'no-border' },
                    title: "Berhasil!",
                    text: success,
                    showConfirmButton: false,
                    timer: 2000
                });
            } else if (error && error !== "") {
                Swal.fire({
                    icon: "error",
                    title: "Gagal!",
                    text: error,
                    timer: 2500,
                    showConfirmButton: false
                });
            }
        });
    </script>
}